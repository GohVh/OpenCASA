<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenCASA: plugins.AVI_Reader Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Morphometry.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenCASA
   &#160;<span id="projectnumber">SNAPSHOT_0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceplugins.html">plugins</a></li><li class="navelem"><a class="el" href="classplugins_1_1_a_v_i___reader.html">AVI_Reader</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classplugins_1_1_a_v_i___reader-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">plugins.AVI_Reader Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for plugins.AVI_Reader:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classplugins_1_1_a_v_i___reader.png" usemap="#plugins.AVI_5FReader_map" alt=""/>
  <map id="plugins.AVI_5FReader_map" name="plugins.AVI_Reader_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>raInputStream</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5fa8df5595ab3953648af6ba771d7260"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplugins_1_1_a_v_i___reader.html#a5fa8df5595ab3953648af6ba771d7260">deleteSlice</a> (int n)</td></tr>
<tr class="separator:a5fa8df5595ab3953648af6ba771d7260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f0298a77a2f64de07163cd15f0f76e3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplugins_1_1_a_v_i___reader.html#a9f0298a77a2f64de07163cd15f0f76e3">getHeight</a> ()</td></tr>
<tr class="separator:a9f0298a77a2f64de07163cd15f0f76e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744024404a4410f538d5c054de2cbfad"><td class="memItemLeft" align="right" valign="top">ImagePlus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplugins_1_1_a_v_i___reader.html#a744024404a4410f538d5c054de2cbfad">getImagePlus</a> ()</td></tr>
<tr class="separator:a744024404a4410f538d5c054de2cbfad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac07bb33097a0463d1b24a94e40392af5"><td class="memItemLeft" align="right" valign="top">synchronized ImageProcessor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplugins_1_1_a_v_i___reader.html#ac07bb33097a0463d1b24a94e40392af5">getProcessor</a> (int n)</td></tr>
<tr class="separator:ac07bb33097a0463d1b24a94e40392af5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35b09255d1bb2e12176551d379f6042f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplugins_1_1_a_v_i___reader.html#a35b09255d1bb2e12176551d379f6042f">getSize</a> ()</td></tr>
<tr class="separator:a35b09255d1bb2e12176551d379f6042f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b8de54f729c44ca924159b217c946ca"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplugins_1_1_a_v_i___reader.html#a7b8de54f729c44ca924159b217c946ca">getSliceLabel</a> (int n)</td></tr>
<tr class="separator:a7b8de54f729c44ca924159b217c946ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01379b080b7c89a590977c014ae03693"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplugins_1_1_a_v_i___reader.html#a01379b080b7c89a590977c014ae03693">getWidth</a> ()</td></tr>
<tr class="separator:a01379b080b7c89a590977c014ae03693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa74d3458a058efef50834cf1ff7d18a6"><td class="memItemLeft" align="right" valign="top">ImageStack&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplugins_1_1_a_v_i___reader.html#aa74d3458a058efef50834cf1ff7d18a6">makeStack</a> (String path, int firstFrame, int lastFrame, boolean isVirtual, boolean convertToGray, boolean flipVertical)</td></tr>
<tr class="separator:aa74d3458a058efef50834cf1ff7d18a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3e5dc27be9c63e91e7acb9171918c68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplugins_1_1_a_v_i___reader.html#ae3e5dc27be9c63e91e7acb9171918c68">run</a> (String arg)</td></tr>
<tr class="separator:ae3e5dc27be9c63e91e7acb9171918c68"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre>
ImageJ Plugin for reading an AVI file into an image stack
 (one slice per video frame)</pre><pre>Restrictions and Notes:<ul>
<li>Only few formats supported:<ul>
<li>uncompressed 8 bit with palette (=LUT)</li>
<li>uncompressed 8 &amp; 16 bit grayscale</li>
<li>uncompressed 24 &amp; 32 bit RGB (alpha channel ignored)</li>
<li>uncompressed 32 bit AYUV (alpha channel ignored)</li>
<li>various YUV 4:2:2 compressed formats</li>
<li>png or jpeg-encoded individual frames.
           Note that most MJPG (motion-JPEG) formats are not read correctly.</li>
</ul>
</li>
<li>Does not read avi formats with more than one frame per chunk</li>
<li>Palette changes during the video not supported</li>
<li>Out-of-sequence frames (sequence given by index) not supported</li>
<li>Different frame sizes in one file (rcFrame) not supported</li>
<li>Conversion of (A)YUV formats to grayscale is non-standard:
       All 255 levels are kept as in the input (i.e. the full dynamic
       range of data from a frame grabber is preserved).
       For standard behavior, use "Brightness&amp;Contrast", Press "Set",
       enter "Min." 16, "Max." 235, and press "Apply".</li>
</ul>
</pre><pre><ul>
<li>Note: As a last frame, one can enter '0' (= last frame),
       '-1' (last frame -1), etc.</li>
</ul>
</pre><pre>Version History:
 2017-01-24
  Commented line 275 to hide dialog. The parameters isVirtual, convertToGray and flipVertical 
  are set to 'false' by default. The purpose of this adaptation is to automate the process of analyzing directories
  2008-04-29
       based on a plugin by Daniel Marsh and Wayne Rasband;
       modifications by Michael Schmid<ul>
<li>Support for several other formats added, especially some YUV
       (also named YCbCr) formats</li>
<li>Uneven chunk sizes fixed</li>
<li>Negative biHeight fixed</li>
<li>Audio or second video stream don't cause a problem</li>
<li>Can read part of a file (specify start &amp; end frame numbers)</li>
<li>Can convert YUV and RGB to grayscale (does not convert 8-bit with palette)</li>
<li>Can flip vertically</li>
<li>Can create a virtual stack</li>
<li>Added slice label: time of the frame in the movie</li>
<li>Added a public method 'getStack' that does not create an image window</li>
<li>More compact code, especially for reading the header (rewritten)</li>
<li>In the code, bitmapinfo items have their canonical names.
  2008-06-08</li>
<li>Support for png and jpeg/mjpg encoded files added</li>
<li>Retrieves animation speed from image frame rate</li>
<li>Exception handling without multiple error messages
  2008-07-03</li>
<li>Support for 16bit AVIs coded by MIL (Matrox Imaging Library)
  2009-03-06</li>
<li>Jesper Soendergaard Pedersen added support for extended (large) AVI files,
       also known as 'AVI 2.0' or 'OpenDML 1.02 AVI file format extension'
       For Virtual stacks, it reads the 'AVI 2.0' index (indx and ix00 tags).
       This results in a dramatic speed increase in loading of virtual stacks.
       If indx and ix00 are not found or bIndexType is unsupported, as well as for
       non-virtual stacks it finds the frames 'the old way', by scanning the whole file.</li>
<li>Fixes a bug where it read too many frames.
       This version was published as external plugin.
  2011-12-03</li>
<li>Minor updates &amp; cleanup for integration into ImageJ again.</li>
<li>Multithread-compliant.
  2011-12-10</li>
<li>Based on a plugin by Jesper Soendergaard Pedersen, also reads the 'idx1' index of
       AVI 1 files, speeding up initial reading of virtual stacks also for smaller files.</li>
<li>When the first frame to read is &gt; 1, uses the index to quickly skip the initial frames.</li>
<li>Creates a unique window name.</li>
<li>Opens MJPG files also if they do not contain Huffman tables
  2017-09-28</li>
</ul>
</pre><pre>Commented line 1268 (in current file) from the original plugin to hide dialog<ul>
<li>in order to apply the plugin automatically (by Carlos Alquézar)</li>
</ul>
</pre><pre>The AVI format looks like this:
RIFF AVI                 RIFF HEADER, AVI CHUNK                  
  | LIST hdrl            MAIN AVI HEADER
  | | avih               AVI HEADER
  | | LIST strl          STREAM LIST(s) (One per stream)
  | | | strh             STREAM HEADER (Required after above; fourcc type is 'vids' for video stream)
  | | | strf             STREAM FORMAT (for video: BitMapInfo; may also contain palette)
  | | | strd             OPTIONAL &ndash; STREAM DATA (ignored in this plugin)
  | | | strn             OPTIONAL &ndash; STREAM NAME (ignored in this plugin)
  | | | indx             OPTIONAL &ndash; MAIN 'AVI 2.0' INDEX
  | LIST movi            MOVIE DATA
  | | ix00               partial video index of 'AVI 2.0', usually missing in AVI 1 (ix01 would be for audio)
  | | [rec]              RECORD DATA (one record per frame for interleaved video; optional, unsupported in this plugin)
  | | |-dataSubchunks    RAW DATA: '??wb' for audio, '??db' and '??dc' for uncompressed and
  | |                    compressed video, respectively. "??" denotes stream number, usually "00" or "01"
  | idx1                 AVI 1 INDEX ('old-style'); may be missing in very old formats
RIFF AVIX                'AVI 2.0' only: further chunks
  | LIST movi            more movie data, as above, usually with ix00 index
                         Any number of further chunks (RIFF tags) may follow</pre><pre>Items ('chunks') with one fourcc (four-character code such as 'strh') start with two 4-byte words:
the fourcc and the size of the data area.
Items with two fourcc (e.g. 'LIST hdrl') have three 4-byte words: the first fourcc, the size and the
second fourcc. Note that the size includes the 4 bytes needed for the second fourcc.</pre><pre>Chunks with fourcc 'JUNK' can appear anywhere and should be ignored.</pre><pre></pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a5fa8df5595ab3953648af6ba771d7260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fa8df5595ab3953648af6ba771d7260">&sect;&nbsp;</a></span>deleteSlice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void plugins.AVI_Reader.deleteSlice </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes the specified image from this virtual stack (if it is one), where 1&lt;=n&lt;=nslices. </p>

</div>
</div>
<a id="a9f0298a77a2f64de07163cd15f0f76e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f0298a77a2f64de07163cd15f0f76e3">&sect;&nbsp;</a></span>getHeight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int plugins.AVI_Reader.getHeight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the image height of the virtual stack </p>

</div>
</div>
<a id="a744024404a4410f538d5c054de2cbfad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a744024404a4410f538d5c054de2cbfad">&sect;&nbsp;</a></span>getImagePlus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ImagePlus plugins.AVI_Reader.getImagePlus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the ImagePlus opened by <a class="el" href="classplugins_1_1_a_v_i___reader.html#ae3e5dc27be9c63e91e7acb9171918c68">run()</a>. </p>

</div>
</div>
<a id="ac07bb33097a0463d1b24a94e40392af5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac07bb33097a0463d1b24a94e40392af5">&sect;&nbsp;</a></span>getProcessor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized ImageProcessor plugins.AVI_Reader.getProcessor </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an ImageProcessor for the specified slice of this virtual stack (if it is one) where 1&lt;=n&lt;=nslices. Returns null if no virtual stack or no slices. </p>

</div>
</div>
<a id="a35b09255d1bb2e12176551d379f6042f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35b09255d1bb2e12176551d379f6042f">&sect;&nbsp;</a></span>getSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int plugins.AVI_Reader.getSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the number of images in this virtual stack (if it is one) </p>

</div>
</div>
<a id="a7b8de54f729c44ca924159b217c946ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b8de54f729c44ca924159b217c946ca">&sect;&nbsp;</a></span>getSliceLabel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String plugins.AVI_Reader.getSliceLabel </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the label of the specified slice in this virtual stack (if it is one). </p>

</div>
</div>
<a id="a01379b080b7c89a590977c014ae03693"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01379b080b7c89a590977c014ae03693">&sect;&nbsp;</a></span>getWidth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int plugins.AVI_Reader.getWidth </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the image width of the virtual stack </p>

</div>
</div>
<a id="aa74d3458a058efef50834cf1ff7d18a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa74d3458a058efef50834cf1ff7d18a6">&sect;&nbsp;</a></span>makeStack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ImageStack plugins.AVI_Reader.makeStack </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>firstFrame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lastFrame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>isVirtual</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>convertToGray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>flipVertical</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create an ImageStack from an avi file with given path.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Directoy+filename of the avi file </td></tr>
    <tr><td class="paramname">firstFrame</td><td>Number of first frame to read (first frame of the file is 1) </td></tr>
    <tr><td class="paramname">lastFrame</td><td>Number of last frame to read or 0 for reading all, -1 for all but last... </td></tr>
    <tr><td class="paramname">isVirtual</td><td>Whether to return a virtual stack </td></tr>
    <tr><td class="paramname">convertToGray</td><td>Whether to convert color images to grayscale </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the stack; null on failure. The stack returned may be non-null, but have a length of zero if no suitable frames were found </dd></dl>

</div>
</div>
<a id="ae3e5dc27be9c63e91e7acb9171918c68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3e5dc27be9c63e91e7acb9171918c68">&sect;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void plugins.AVI_Reader.run </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The plugin is invoked by ImageJ using this method. String 'arg' may be used to select the path. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/USUARIO/git/opencasa/OpenCASA_/src/main/java/plugins/<a class="el" href="_a_v_i___reader_8java.html">AVI_Reader.java</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
