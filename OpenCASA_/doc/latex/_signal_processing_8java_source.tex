\hypertarget{_signal_processing_8java_source}{}\section{Signal\+Processing.\+java}
\label{_signal_processing_8java_source}\index{Signal\+Processing.\+java@{Signal\+Processing.\+java}}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ *   OpenCASA software v0.8 for video and image analysis}
00003 \textcolor{comment}{ *   Copyright (C) 2017  Carlos Alqu√©zar}
00004 \textcolor{comment}{ *}
00005 \textcolor{comment}{ *   This program is free software: you can redistribute it and/or modify}
00006 \textcolor{comment}{ *   it under the terms of the GNU General Public License as published by}
00007 \textcolor{comment}{ *   the Free Software Foundation, either version 3 of the License, or}
00008 \textcolor{comment}{ *   (at your option) any later version.}
00009 \textcolor{comment}{ *}
00010 \textcolor{comment}{ *   This program is distributed in the hope that it will be useful,}
00011 \textcolor{comment}{ *   but WITHOUT ANY WARRANTY; without even the implied warranty of}
00012 \textcolor{comment}{ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}
00013 \textcolor{comment}{ *   GNU General Public License for more details.}
00014 \textcolor{comment}{ *}
00015 \textcolor{comment}{ *   You should have received a copy of the GNU General Public License}
00016 \textcolor{comment}{ *   along with this program.  If not, see <https://www.gnu.org/licenses/>.}
00017 \textcolor{comment}{*/}    
00018 
00019 \textcolor{keyword}{package }functions;
00020 
00021 \textcolor{keyword}{import} java.util.ArrayList;
00022 \textcolor{keyword}{import} java.util.List;
00023 \textcolor{keyword}{import} java.util.ListIterator;
00024 
00025 \textcolor{keyword}{import} \hyperlink{namespacedata}{data}.\hyperlink{classdata_1_1_params}{Params};
00026 \textcolor{keyword}{import} \hyperlink{namespacedata}{data}.\hyperlink{classdata_1_1_serializable_list}{SerializableList};
00027 \textcolor{keyword}{import} \hyperlink{namespacedata}{data}.\hyperlink{classdata_1_1_spermatozoon}{Spermatozoon};
00028 
\hypertarget{_signal_processing_8java_source_l00033}{}\hyperlink{classfunctions_1_1_signal_processing}{00033} \textcolor{keyword}{public} \textcolor{keyword}{class }\hyperlink{classfunctions_1_1_signal_processing}{SignalProcessing} \{
00034 
00035   \textcolor{comment}{/******************************************************/}
\hypertarget{_signal_processing_8java_source_l00044}{}\hyperlink{classfunctions_1_1_signal_processing_abf1074d52caa632088bc9c8f12f8ee53}{00044}   \textcolor{keyword}{public} \hyperlink{classdata_1_1_serializable_list}{SerializableList} \hyperlink{classfunctions_1_1_signal_processing_abf1074d52caa632088bc9c8f12f8ee53}{averageTracks}(
      \hyperlink{classdata_1_1_serializable_list}{SerializableList} theTracks) \{
00045 
00046     \hyperlink{classdata_1_1_serializable_list}{SerializableList} avgTracks = \textcolor{keyword}{new} \hyperlink{classdata_1_1_serializable_list}{SerializableList}();
00047     \textcolor{keywordflow}{for} (ListIterator iT = theTracks.listIterator(); iT.hasNext();) \{
00048       List aTrack = (ArrayList) iT.next();
00049       List avgTrack = \hyperlink{classfunctions_1_1_signal_processing_a4f10245c50d850b87d1ef4d81c28300d}{movingAverage}(aTrack);
00050       avgTracks.add(avgTrack);
00051     \}
00052     \textcolor{keywordflow}{return} avgTracks;
00053   \}
00054 
00055   \textcolor{comment}{/******************************************************/}
\hypertarget{_signal_processing_8java_source_l00065}{}\hyperlink{classfunctions_1_1_signal_processing_ab5068ef8536594355df9d576ba97dd57}{00065}   \textcolor{keyword}{public} List \hyperlink{classfunctions_1_1_signal_processing_ab5068ef8536594355df9d576ba97dd57}{decimateTrack}(List track, \textcolor{keywordtype}{int} factor) \{
00066     List decimatedTrack = \textcolor{keyword}{new} ArrayList();
00067     \textcolor{keywordflow}{for} (ListIterator iT = track.listIterator(); iT.hasNext();) \{
00068       \hyperlink{classdata_1_1_spermatozoon}{Spermatozoon} p = (\hyperlink{classdata_1_1_spermatozoon}{Spermatozoon}) iT.next();
00069       decimatedTrack.add(p);
00070       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < factor; i++) \{
00071         \textcolor{keywordflow}{if} (iT.hasNext())
00072           p = (\hyperlink{classdata_1_1_spermatozoon}{Spermatozoon}) iT.next();
00073       \}
00074     \}
00075     \textcolor{keywordflow}{return} decimatedTrack;
00076   \}
00077 
00078   \textcolor{comment}{/******************************************************/}
\hypertarget{_signal_processing_8java_source_l00086}{}\hyperlink{classfunctions_1_1_signal_processing_a3681b0de9ff6ff95edd91bab486627e5}{00086}   \textcolor{keyword}{public} List \hyperlink{classfunctions_1_1_signal_processing_a3681b0de9ff6ff95edd91bab486627e5}{decimateTracks}(List theTracks, \textcolor{keywordtype}{int} factor) \{
00087     List decimatedTracks = \textcolor{keyword}{new} ArrayList();
00088     \textcolor{keywordflow}{for} (ListIterator iT = theTracks.listIterator(); iT.hasNext();) \{
00089       List aTrack = (ArrayList) iT.next();
00090       decimatedTracks.add(\hyperlink{classfunctions_1_1_signal_processing_ab5068ef8536594355df9d576ba97dd57}{decimateTrack}(aTrack, factor));
00091     \}
00092     \textcolor{keywordflow}{return} decimatedTracks;
00093   \}
00094 
00095   \textcolor{comment}{/******************************************************/}
\hypertarget{_signal_processing_8java_source_l00100}{}\hyperlink{classfunctions_1_1_signal_processing_a032b1dff0d4763927928158714db911f}{00100}   \textcolor{keyword}{public} \hyperlink{classdata_1_1_serializable_list}{SerializableList} \hyperlink{classfunctions_1_1_signal_processing_a032b1dff0d4763927928158714db911f}{filterTracksByLength}(
      \hyperlink{classdata_1_1_serializable_list}{SerializableList} theTracks) \{
00101     \hyperlink{classdata_1_1_serializable_list}{SerializableList} filteredTracks = \textcolor{keyword}{new} \hyperlink{classdata_1_1_serializable_list}{SerializableList}();
00102     \textcolor{keywordflow}{for} (ListIterator iT = theTracks.listIterator(); iT.hasNext();) \{
00103       List aTrack = (ArrayList) iT.next();
00104       \textcolor{keywordflow}{if} (aTrack.size() >= \hyperlink{classdata_1_1_params}{Params}.\hyperlink{classdata_1_1_params_aa730fe10ba7a04b3871e8ff2ea8cc834}{minTrackLength})
00105         filteredTracks.add(aTrack);
00106     \}
00107     \textcolor{keywordflow}{return} filteredTracks;
00108   \}
00109 
00110   \textcolor{comment}{/******************************************************/}
\hypertarget{_signal_processing_8java_source_l00115}{}\hyperlink{classfunctions_1_1_signal_processing_a7302e4cf91bc23463aa9354325d2993d}{00115}   \textcolor{keyword}{public} \hyperlink{classdata_1_1_serializable_list}{SerializableList} \hyperlink{classfunctions_1_1_signal_processing_a7302e4cf91bc23463aa9354325d2993d}{filterTracksByMotility}(
      \hyperlink{classdata_1_1_serializable_list}{SerializableList} theTracks) \{
00116     \hyperlink{classdata_1_1_serializable_list}{SerializableList} filteredTracks = \textcolor{keyword}{new} \hyperlink{classdata_1_1_serializable_list}{SerializableList}();
00117     \hyperlink{classfunctions_1_1_kinematics}{Kinematics} K = \textcolor{keyword}{new} \hyperlink{classfunctions_1_1_kinematics}{Kinematics}();
00118     \textcolor{keywordflow}{for} (ListIterator iT = theTracks.listIterator(); iT.hasNext();) \{
00119       List aTrack = (ArrayList) iT.next();
00120       \textcolor{keywordflow}{if} (K.\hyperlink{classfunctions_1_1_kinematics_a5dbef047c19d4c554b08ba879eb7443f}{motilityTest}(aTrack))
00121         filteredTracks.add(aTrack);
00122     \}
00123     \textcolor{keywordflow}{return} filteredTracks;
00124   \}
00125 
\hypertarget{_signal_processing_8java_source_l00131}{}\hyperlink{classfunctions_1_1_signal_processing_a4f10245c50d850b87d1ef4d81c28300d}{00131}   \textcolor{keyword}{public} \textcolor{keywordtype}{float}[] \hyperlink{classfunctions_1_1_signal_processing_a4f10245c50d850b87d1ef4d81c28300d}{movingAverage}(\textcolor{keywordtype}{float}[] points, \textcolor{keywordtype}{int} wSize) \{
00132     \textcolor{keywordtype}{int} nPoints = points.length;
00133     \textcolor{keywordtype}{int} count = 0;
00134     \textcolor{keywordtype}{float}[] avgPoints = \textcolor{keyword}{new} \textcolor{keywordtype}{float}[nPoints - wSize + 1];
00135     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = wSize - 1; i < nPoints; i++) \{
00136       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = wSize - 1; k >= 0; k--) \{
00137         avgPoints[i - wSize + 1] += points[i - k];
00138       \}
00139       avgPoints[i - wSize + 1] /= (float) wSize;
00140     \}
00141     \textcolor{keywordflow}{return} avgPoints;
00142   \}
00143 
\hypertarget{_signal_processing_8java_source_l00148}{}\hyperlink{classfunctions_1_1_signal_processing_a9f9e525d2a03a62026159736e71a2343}{00148}   \textcolor{keyword}{public} List \hyperlink{classfunctions_1_1_signal_processing_a9f9e525d2a03a62026159736e71a2343}{movingAverage}(List track) \{
00149     \textcolor{keywordflow}{return} \hyperlink{classfunctions_1_1_signal_processing_a4f10245c50d850b87d1ef4d81c28300d}{movingAverage}(track, \hyperlink{classdata_1_1_params}{Params}.\hyperlink{classdata_1_1_params_ad1b7844e5f66ee81c3de06d1a8ca645e}{wSize});
00150   \}
00151 
00152   \textcolor{comment}{/******************************************************/}
\hypertarget{_signal_processing_8java_source_l00162}{}\hyperlink{classfunctions_1_1_signal_processing_a9dbd7166c87ffab7dc6d7f7435e89f95}{00162}   \textcolor{keyword}{public} List \hyperlink{classfunctions_1_1_signal_processing_a9dbd7166c87ffab7dc6d7f7435e89f95}{movingAverage}(List track, \textcolor{keywordtype}{int} wSize) \{
00163     \textcolor{keywordtype}{int} nPoints = track.size();
00164     List avgTrack = \textcolor{keyword}{new} ArrayList();
00165     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = wSize - 1; j < nPoints; j++) \{
00166       \textcolor{keywordtype}{int} avgX = 0;
00167       \textcolor{keywordtype}{int} avgY = 0;
00168       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = wSize - 1; k >= 0; k--) \{
00169         \hyperlink{classdata_1_1_spermatozoon}{Spermatozoon} aSpermatozoon = (\hyperlink{classdata_1_1_spermatozoon}{Spermatozoon}) track.get(j - k);
00170         avgX += (int) aSpermatozoon.\hyperlink{classdata_1_1_spermatozoon_ad0da36b2558901e21e7a30f6c227a45e}{x};
00171         avgY += (\textcolor{keywordtype}{int}) aSpermatozoon.\hyperlink{classdata_1_1_spermatozoon_aa4f0d3eebc3c443f9be81bf48561a217}{y};
00172       \}
00173       avgX = avgX / wSize;
00174       avgY = avgY / wSize;
00175       \hyperlink{classdata_1_1_spermatozoon}{Spermatozoon} newSpermatozoon = \textcolor{keyword}{new} \hyperlink{classdata_1_1_spermatozoon}{Spermatozoon}();
00176       newSpermatozoon.\hyperlink{classdata_1_1_spermatozoon_ad0da36b2558901e21e7a30f6c227a45e}{x} = (float) avgX;
00177       newSpermatozoon.\hyperlink{classdata_1_1_spermatozoon_aa4f0d3eebc3c443f9be81bf48561a217}{y} = (float) avgY;
00178       avgTrack.add(newSpermatozoon);
00179     \}
00180     \textcolor{keywordflow}{return} avgTrack;
00181   \}
00182 \}
\end{DoxyCode}
