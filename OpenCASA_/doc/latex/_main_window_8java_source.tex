\hypertarget{_main_window_8java_source}{}\section{Main\+Window.\+java}
\label{_main_window_8java_source}\index{Main\+Window.\+java@{Main\+Window.\+java}}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ *   OpenCASA software v0.8 for video and image analysis}
00003 \textcolor{comment}{ *   Copyright (C) 2017  Carlos Alqu√©zar}
00004 \textcolor{comment}{ *}
00005 \textcolor{comment}{ *   This program is free software: you can redistribute it and/or modify}
00006 \textcolor{comment}{ *   it under the terms of the GNU General Public License as published by}
00007 \textcolor{comment}{ *   the Free Software Foundation, either version 3 of the License, or}
00008 \textcolor{comment}{ *   (at your option) any later version.}
00009 \textcolor{comment}{ *}
00010 \textcolor{comment}{ *   This program is distributed in the hope that it will be useful,}
00011 \textcolor{comment}{ *   but WITHOUT ANY WARRANTY; without even the implied warranty of}
00012 \textcolor{comment}{ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}
00013 \textcolor{comment}{ *   GNU General Public License for more details.}
00014 \textcolor{comment}{ *}
00015 \textcolor{comment}{ *   You should have received a copy of the GNU General Public License}
00016 \textcolor{comment}{ *   along with this program.  If not, see <https://www.gnu.org/licenses/>.}
00017 \textcolor{comment}{*/}    
00018 
00019 \textcolor{keyword}{package }gui;
00020 
00021 \textcolor{keyword}{import} java.awt.Color;
00022 \textcolor{keyword}{import} java.awt.Dimension;
00023 \textcolor{keyword}{import} java.awt.GridBagConstraints;
00024 \textcolor{keyword}{import} java.awt.GridBagLayout;
00025 \textcolor{keyword}{import} java.awt.HeadlessException;
00026 \textcolor{keyword}{import} java.awt.Image;
00027 \textcolor{keyword}{import} java.awt.event.ActionEvent;
00028 \textcolor{keyword}{import} java.awt.event.ActionListener;
00029 
00030 \textcolor{keyword}{import} javax.imageio.ImageIO;
00031 \textcolor{keyword}{import} javax.swing.ImageIcon;
00032 \textcolor{keyword}{import} javax.swing.JButton;
00033 \textcolor{keyword}{import} javax.swing.JFrame;
00034 \textcolor{keyword}{import} javax.swing.JPanel;
00035 
00036 \textcolor{keyword}{import} \hyperlink{namespaceanalysis}{analysis}.\hyperlink{classanalysis_1_1_chemotaxis}{Chemotaxis};
00037 \textcolor{keyword}{import} \hyperlink{namespaceanalysis}{analysis}.\hyperlink{classanalysis_1_1_motility}{Motility};
00038 \textcolor{keyword}{import} \hyperlink{namespacedata}{data}.\hyperlink{classdata_1_1_params}{Params};
00039 \textcolor{keyword}{import} \hyperlink{namespacedata}{data}.\hyperlink{classdata_1_1_persistent_random_walker}{PersistentRandomWalker};
00040 \textcolor{keyword}{import} \hyperlink{namespacedata}{data}.\hyperlink{classdata_1_1_simulation}{Simulation};
00041 \textcolor{keyword}{import} ij.IJ;
00042 \textcolor{keyword}{import} ij.gui.GenericDialog;
00043 
\hypertarget{_main_window_8java_source_l00048}{}\hyperlink{classgui_1_1_main_window}{00048} \textcolor{keyword}{public} \textcolor{keyword}{class }\hyperlink{classgui_1_1_main_window}{MainWindow} \textcolor{keyword}{extends} JFrame \{
00049 
\hypertarget{_main_window_8java_source_l00053}{}\hyperlink{classgui_1_1_main_window_a3238d314ecdee14d2966760945d00c3b}{00053}   \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keyword}{final} \textcolor{keywordtype}{long} \hyperlink{classgui_1_1_main_window_a3238d314ecdee14d2966760945d00c3b}{serialVersionUID} = 1L;
\hypertarget{_main_window_8java_source_l00055}{}\hyperlink{classgui_1_1_main_window_aab2220fd8a9f6468b0b5e9f1ddf28729}{00055}   \textcolor{keyword}{private} \hyperlink{classgui_1_1_main_window}{MainWindow} \hyperlink{classgui_1_1_main_window_aab2220fd8a9f6468b0b5e9f1ddf28729}{mw};
00056 
\hypertarget{_main_window_8java_source_l00061}{}\hyperlink{classgui_1_1_main_window_afe2ccfe7a8f33c8819567771cf151b0e}{00061}   \textcolor{keyword}{public} \hyperlink{classgui_1_1_main_window_afe2ccfe7a8f33c8819567771cf151b0e}{MainWindow}(String title) \textcolor{keywordflow}{throws} HeadlessException \{
00062     super(title);
00063     \hyperlink{classgui_1_1_main_window_ae3700d532c2ae5e2171016e13584b2d6}{createGUI}();
00064     this.setPreferredSize(\textcolor{keyword}{new} Dimension(600, 300));
00065     this.setDefaultCloseOperation(JFrame.EXIT\_ON\_CLOSE);
00066     this.pack();
00067     this.setVisible(\textcolor{keyword}{true});
00068     this.setLocationRelativeTo(null);
00069     mw = \textcolor{keyword}{this};
00070     \hyperlink{classdata_1_1_params}{Params}.\hyperlink{classdata_1_1_params_a0a4fc9bb0ad6624d84e20d1cd9644187}{resetParams}();
00071   \}
00072   
\hypertarget{_main_window_8java_source_l00082}{}\hyperlink{classgui_1_1_main_window_aef273df0357bb9cf10e8692fb49c40cb}{00082}   \textcolor{keyword}{private} \textcolor{keywordtype}{void} \hyperlink{classgui_1_1_main_window_aef273df0357bb9cf10e8692fb49c40cb}{addButton}(\textcolor{keyword}{final} String label, \textcolor{keywordtype}{int} gridx, \textcolor{keywordtype}{int} gridy, Color background, String 
      iconPath, JPanel panel) \{
00083 
00084     GridBagConstraints c = \textcolor{keyword}{new} GridBagConstraints();
00085     c.weightx = 0.5;
00086     c.fill = GridBagConstraints.HORIZONTAL;
00087     c.ipady = 0;
00088     c.gridx = gridx;
00089     c.gridy = gridy;
00090     JButton btn = \textcolor{keyword}{new} JButton(label);
00091     btn.setBackground(background);
00092     \textcolor{keywordflow}{try} \{
00093       \textcolor{comment}{// Image img =}
00094       \textcolor{comment}{// ImageIO.read(getClass().getResource("/resources/motility.png"));}
00095       Image img = ImageIO.read(getClass().getResource(iconPath));
00096       btn.setIcon(\textcolor{keyword}{new} ImageIcon(img));
00097     \} \textcolor{keywordflow}{catch} (Exception ex) \{
00098       IJ.handleException(ex);
00099 \textcolor{comment}{//      System.out.println(ex);}
00100     \}
00101     \textcolor{comment}{// Add action listener}
00102     btn.addActionListener(\textcolor{keyword}{new} ActionListener() \{
00103       \textcolor{keyword}{public} \textcolor{keywordtype}{void} actionPerformed(ActionEvent e) \{
00104         \textcolor{keywordflow}{if} (label.equals(\textcolor{stringliteral}{"Chemotaxis"})) \{
00105           \hyperlink{classanalysis_1_1_chemotaxis}{Chemotaxis} ch = \textcolor{keyword}{new} \hyperlink{classanalysis_1_1_chemotaxis}{Chemotaxis}();
00106           \textcolor{keywordflow}{try} \{
00107             mw.setVisible(\textcolor{keyword}{false});
00108             ch.\hyperlink{classanalysis_1_1_chemotaxis_aef66a58ab7f95817a68a3429550562fc}{selectAnalysis}();
00109             ch.execute();
00110             mw.setVisible(\textcolor{keyword}{true});
00111           \} \textcolor{keywordflow}{catch} (Exception e1) \{
00112             IJ.handleException(e1);
00113           \}
00114         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (label.equals(\textcolor{stringliteral}{"Motility"})) \{
00115           \hyperlink{classanalysis_1_1_motility}{Motility} mot = \textcolor{keyword}{new} \hyperlink{classanalysis_1_1_motility}{Motility}();
00116           \textcolor{keywordflow}{try} \{
00117             mw.setVisible(\textcolor{keyword}{false});
00118             mot.\hyperlink{classanalysis_1_1_motility_aef66a58ab7f95817a68a3429550562fc}{selectAnalysis}();
00119             mot.execute();
00120             mw.setVisible(\textcolor{keyword}{true});
00121           \} \textcolor{keywordflow}{catch} (Exception e1) \{
00122             IJ.handleException(e1);
00123           \}          
00124         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (label.equals(\textcolor{stringliteral}{"Viability"})) \{
00125           mw.setVisible(\textcolor{keyword}{false});
00126           \hyperlink{classgui_1_1_viability_window}{ViabilityWindow} viabilityW = \textcolor{keyword}{new} \hyperlink{classgui_1_1_viability_window}{ViabilityWindow}();
00127           viabilityW.addWindowListener(\textcolor{keyword}{new} java.awt.event.WindowAdapter() \{
00128             @Override
00129             \textcolor{keyword}{public} \textcolor{keywordtype}{void} windowClosing(java.awt.event.WindowEvent windowEvent) \{
00130               \textcolor{keywordflow}{if} (mw != null)
00131                 mw.setVisible(\textcolor{keyword}{true});
00132             \}
00133           \});
00134           \textcolor{keywordtype}{int} out = viabilityW.\hyperlink{classgui_1_1_image_analysis_window_a58e8be2db2660128e4e6456a9c981fb5}{run}();
00135           \textcolor{keywordflow}{if}(out<0)\{
00136             mw.setVisible(\textcolor{keyword}{true});
00137           \}
00138         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (label.equals(\textcolor{stringliteral}{"Morphometry"})) \{
00139           mw.setVisible(\textcolor{keyword}{false});
00140           \hyperlink{classgui_1_1_morph_window}{MorphWindow} morphW = \textcolor{keyword}{new} \hyperlink{classgui_1_1_morph_window}{MorphWindow}();
00141           morphW.addWindowListener(\textcolor{keyword}{new} java.awt.event.WindowAdapter() \{
00142             @Override
00143             \textcolor{keyword}{public} \textcolor{keywordtype}{void} windowClosing(java.awt.event.WindowEvent windowEvent) \{
00144               \textcolor{keywordflow}{if} (mw != null)
00145                 mw.setVisible(\textcolor{keyword}{true});
00146             \}
00147           \});
00148           \textcolor{keywordtype}{int} out = morphW.\hyperlink{classgui_1_1_image_analysis_window_a58e8be2db2660128e4e6456a9c981fb5}{run}();
00149           \textcolor{keywordflow}{if}(out<0)\{
00150             mw.setVisible(\textcolor{keyword}{true});
00151           \}
00152         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (label.equals(\textcolor{stringliteral}{"Simulation"})) \{
00153           \hyperlink{classgui_1_1_main_window_a1f451daf160cbacfab1e7b495789750e}{simulate}();
00154         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (label.equals(\textcolor{stringliteral}{"Settings"})) \{
00155           \hyperlink{classgui_1_1_settings_window}{SettingsWindow} sw = \textcolor{keyword}{new} \hyperlink{classgui_1_1_settings_window}{SettingsWindow}(\textcolor{stringliteral}{"Settings"});
00156           sw.addWindowListener(\textcolor{keyword}{new} java.awt.event.WindowAdapter() \{
00157             @Override
00158             \textcolor{keyword}{public} \textcolor{keywordtype}{void} windowClosing(java.awt.event.WindowEvent windowEvent) \{
00159               \textcolor{keywordflow}{if} (mw != null)
00160                 mw.setVisible(\textcolor{keyword}{true});
00161             \}
00162           \});
00163           mw.setVisible(\textcolor{keyword}{false});
00164           \textcolor{comment}{//sw.run(); }
00165         \}
00166       \}
00167     \});
00168     panel.add(btn, c);
00169   \}
00170 
\hypertarget{_main_window_8java_source_l00174}{}\hyperlink{classgui_1_1_main_window_ae3700d532c2ae5e2171016e13584b2d6}{00174}   \textcolor{keyword}{private} \textcolor{keywordtype}{void} \hyperlink{classgui_1_1_main_window_ae3700d532c2ae5e2171016e13584b2d6}{createGUI}() \{
00175     String parentDir = \textcolor{stringliteral}{""};
00176 \textcolor{comment}{//    String parentDir = "/resources";}
00177     JPanel panel = \textcolor{keyword}{new} JPanel(\textcolor{keyword}{new} GridBagLayout());
00178     \hyperlink{classgui_1_1_main_window_aef273df0357bb9cf10e8692fb49c40cb}{addButton}(\textcolor{stringliteral}{"Motility"}, 0, 0, \textcolor{keyword}{new} Color(255, 255, 255), parentDir+\textcolor{stringliteral}{"/motility.png"}, panel);
00179     \hyperlink{classgui_1_1_main_window_aef273df0357bb9cf10e8692fb49c40cb}{addButton}(\textcolor{stringliteral}{"Chemotaxis"}, 1, 0, \textcolor{keyword}{new} Color(255, 255, 255), parentDir+\textcolor{stringliteral}{"/chemotaxis.png"}, panel);
00180     \hyperlink{classgui_1_1_main_window_aef273df0357bb9cf10e8692fb49c40cb}{addButton}(\textcolor{stringliteral}{"Viability"}, 0, 1, \textcolor{keyword}{new} Color(255, 255, 255), parentDir+\textcolor{stringliteral}{"/viability.png"}, panel);
00181     \hyperlink{classgui_1_1_main_window_aef273df0357bb9cf10e8692fb49c40cb}{addButton}(\textcolor{stringliteral}{"Morphometry"}, 1, 1, \textcolor{keyword}{new} Color(255, 255, 255), parentDir+\textcolor{stringliteral}{"/morphometry.png"}, panel);
00182     \hyperlink{classgui_1_1_main_window_aef273df0357bb9cf10e8692fb49c40cb}{addButton}(\textcolor{stringliteral}{"Simulation"}, 0, 2, \textcolor{keyword}{new} Color(255, 255, 255), parentDir+\textcolor{stringliteral}{"/settings.png"}, panel);
00183     \hyperlink{classgui_1_1_main_window_aef273df0357bb9cf10e8692fb49c40cb}{addButton}(\textcolor{stringliteral}{"Settings"}, 1, 2, \textcolor{keyword}{new} Color(255, 204, 153), parentDir+\textcolor{stringliteral}{"/settings.png"}, panel);
00184     this.setContentPane(panel);
00185   \}
00186   
\hypertarget{_main_window_8java_source_l00190}{}\hyperlink{classgui_1_1_main_window_a1f451daf160cbacfab1e7b495789750e}{00190}   \textcolor{keyword}{private} \textcolor{keywordtype}{void} \hyperlink{classgui_1_1_main_window_a1f451daf160cbacfab1e7b495789750e}{simulate}()\{
00191     GenericDialog gd = \textcolor{keyword}{new} GenericDialog(\textcolor{stringliteral}{"Set Simulation parameters"});
00192     gd.addNumericField(\textcolor{stringliteral}{"Beta"}, 0, 2);
00193     gd.addNumericField(\textcolor{stringliteral}{"Responsiveness (%)"}, 50, 2);
00194     gd.addNumericField(\textcolor{stringliteral}{"Length of the simulation (frames)"}, 500, 0);
00195     gd.showDialog();
00196     \textcolor{keywordflow}{if} (gd.wasCanceled())
00197       \textcolor{keywordflow}{return};
00198     \textcolor{keywordtype}{double} beta = gd.getNextNumber();
00199     \textcolor{keywordtype}{double} responsiveness = gd.getNextNumber() / 100; \textcolor{comment}{// value must be between [0,1]}
00200     \textcolor{keywordtype}{int} length = (int) gd.getNextNumber();
00201     \hyperlink{classdata_1_1_simulation}{Simulation} sim = \textcolor{keyword}{new} \hyperlink{classdata_1_1_persistent_random_walker}{PersistentRandomWalker}(beta, responsiveness, 
      length);
00202     \textcolor{keywordflow}{try} \{
00203       sim.\hyperlink{classdata_1_1_simulation_ad68e8feb22b9629629b377701c6ef3e7}{run}();
00204     \} \textcolor{keywordflow}{catch} (Exception e1) \{
00205       IJ.handleException(e1);
00206 \textcolor{comment}{//      e1.printStackTrace();}
00207     \}
00208   \}
00209 \}
\end{DoxyCode}
